---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

import GetStarted from "@components/GetStarted.astro";

const { currentLocale } = Astro.props;
const pageTitle: string = "LINC: Get help for rent in Fort Bend!";

const faqs = await getCollection("faqs", (item) => (item.id.includes(`${currentLocale}/`)));
const faqsWithContent = await Promise.all(faqs
  .map(async (faq) => ({
    ...faq,
    ...await faq.render(),
  })));
faqsWithContent.sort((prev, current) => (prev.data.order - current.data.order))
---

<BaseLayout pageTitle={pageTitle} currentLocale={currentLocale}>
  <main data-page="faqs">
    <section class="title-section">
      <div class="container">
        <div class="grid">
          <div class="content intro">
            <h1>FAQs</h1>
          </div>
        </div>
      </div>
    </section>
    <section class="faqs">
      {faqsWithContent
        .map((faq) => 
          (<div class="faq">
            <div class="container">
              <div class="content">
                <h4 class="faq--question" data-faq={faq.data.order} data-slug={faq.slug}>
                  {faq.data.title}
                </h4>
                <div class="faq--answer" data-faq={faq.data.order} data-slug={faq.slug}>
                  <faq.Content/>
                </div>
              </div>
            </div>
          </div>
        )
      )}
    </section>
    <GetStarted currentLocale={currentLocale}/>
  </main>
</BaseLayout>

<style>
img[src*=".svg"] {
  width: 100%;
}

.faqs {
  counter-reset: primary 0;
}

.faq--question {
  padding: 1rem 0;
}

.faq:nth-child(odd),
.faq:nth-child(odd) .faq--question {
  background-color: var(--seashell);
}

.faq:nth-child(even),
.faq:nth-child(even) .faq--question {
  background-color: var(--white);
}

.faq--question::before {
  counter-increment: primary;
  content: counter(primary)". ";
}

</style>